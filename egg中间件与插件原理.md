#### egg中间件与插件原理

#### 中间件

egg的中件间采用洋葱，所有的请求经过一个中间件，都会执行两次。 调用Next之前执行一次，调用next时把控制传递给内层的下一个中间件。当内层不再有中间件时或者没有执行next函数时，就依次恢复外层的中间件行为，执行next之后的代码。

我们每新增加一个中间件，就是给它的洋葱模型多包装了一层。

#### 插件

插件是一个微型应用，可以包含中间件

1. 有一些需要做的初始化的操作，需要在应用启动前进行，交给中间件做不合适
2. 中间件的加载是有先后顺序，自身无法控制整个顺序。只能交给使用者，不太友好，而一个插件可以指定使用顺序。
3. 中间件的定位是：拦截用户的请求，并在它的前后做一些事情。但有一些也请求无关的操作，不太适合放在中间件里。

#### co原理

co将所有的yield后面的表达式都封装成了Promise对象，只有当前表达式执行结束后，会在onFulfilled函数内执行gen.next(res)。

下一个表达式执行结束后又调用gen.next()，如此循环，直到done变为true

#### 负数十进制转二进制

将负数转为正数的二进制

取反，加一



函数式编程（柯西化）

十进制转换为二进制

二进是中的负数处理

cdn

缓存

